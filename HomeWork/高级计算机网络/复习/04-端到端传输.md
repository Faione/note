## 四、端到端传输

- [四、端到端传输](#四端到端传输)
  - [1 传输层协议概述](#1-传输层协议概述)
    - [1.1 UDP与TCP概述](#11-udp与tcp概述)
    - [1.2 传输端口与多路分解/复用](#12-传输端口与多路分解复用)
  - [2. UDP](#2-udp)
  - [3. TCP](#3-tcp)

### 1 传输层协议概述

#### 1.1 UDP与TCP概述
- 用户数据报协议UDP(User Datagram Protocol) [RFC 768]
  - 端到端的、尽力而为的数据报传输服务
    - 把下层网络的主机到主机的传递服务扩展到进程到进程的通信服务
    - 简单异步多路分解与复用：所有应用进程的数据通过传输层传输到IP层，即多路复用；传输层收到的数据交付给相应的应用进程即多路分解
- 传输控制协议TCP (Transmission Control Protocol) [RFC 793]
  - 端到端的、可靠的、面向连接的字节流服务
    - 应用最广泛的传输层协议，占据目前互联网的90%以上流量
    - 多路分解与复用
    - 连接管理：先建立逻辑连接，进行双向数据流传输，通信结束后撤销连接
    - 可靠传输：对一个连接上传输的每个字节编号，通过接收确认和重传来保证可靠传输
    - 流量控制：防止发送方发出的数据超出接收方的接收能力
    - 拥塞控制：防止过多数据注入网络造成网络结点或链路超载

#### 1.2 传输端口与多路分解/复用

传输端口是一种抽象的软件端口
- 应用层的各种协议进程与传输实体进行层间交互的一种地址
- 不同操作系统对端口的具体实现方法不同
- 一般，端口由一个消息队列实现
  - 消息到达时，协议把其加到相应端口队列，队列满，消息被丢弃
  - 应用进程需接收消息时，从队列前端读取一条消息；队列空则进程阻塞直到有消息

端口用16位整数标识
- 仅对单台主机有效，区分本计算机应用层中的各进程
- 进程实际需要通过特定主机的某个端口，即<主机IP，端口号>对，进行标识
  - UDP传输由<主机IP，端口号>二元组唯一标识
  - TCP连接由<源端口号，源主机IP，目的端口号，目的主机IP>四元组唯一标识


### 2. UDP



### 3. TCP
## Go学习-基础
### 一、基础概念
后端的主要工作: 
- 解析前段数据（传入参数）
- 处理对应的业务逻辑（执行）
- 返回操作的结果（返回）
  
三层概念：
- API层: 
   - Api层是后端程序的入口与出口，定义了与后端的交互格式（RESTful Api），提供操作方式（Http请求），以及返回的格式（http响应）
   - 提供Api给前端、其他服务使用，同时，接收数据，并反序列化为Go数据结构，之后，再调用相应的业务逻辑，并返回结果
- Service层
   - 包含业务逻辑，即每个Api对应的所要完成的事情（业务目的）
   - Service层是一个项目的核心
- Dao层
   - 数据持久化，后端服务与存储服务的交互

### 二、三层结构
#### （1）API层
Api层功能：
1. 根据路由规则，调用具体函数
   - RESTful使用 URL + Method 作为路由规则
2. 解析文本或二进制数据到Go结构体
   - json反序列化--
3. 调用下一层Service函数

Api层要求
- 可读性：接口需要规范，入RESTful
- 高度复用：使用成熟的库去实现部分功能
- 尽量薄：不做或只做非常少的业务逻辑处理
- 文档化：接口描述尽量规范，使用相关的工具

参考库: Gin、MUX、gRPC（推荐）  
#### （2）Service层
需要注意
1. 单元测试覆盖面尽量高，Service层往往高频迭代与重构，易出现问题
2. 深入实践 **面向对象与DDD**，要求抽象、解耦能力
   - DDD：[Domain-driven Design](https://blog.csdn.net/wwd0501/article/details/95062535) 
3. 选择合适的 **设计模式** 来提升研发效率
   
Service层随业务需求变化而变化，因而初期并不需过分完备的设计，而随业务的成熟逐渐稳定

参考库: stretchr/testify, reflect
#### （3）Dao层
Dao即数据持久化层，以往通常与各种数据库交互，以实现数据持久化，当然，此处也可以理解为当前服务通过数据库操作API与数据库服务（软件）进行交互，显然，服务也可以引申为RPC调用（通过http请求库/服务提供者的Api封装），将数据持久到其他服务中进行处理
- 单个程序由于设计、性能等考量，没有必要独自完成所有业务，此时，可适当解耦，讲一个服务拆分为多个服务，使用RPC讲各个服务串联起来，实现完整的功能，与数据库的交互实际上就是程序通过数据库提供的代码库，传入数据，并期望数据库完成某一操作，显然，类比到RPC调用上也是类似的
- 将数据持久到数据库中的工具就是ORM

需要注意的是：
1. 选用官方或社区高频使用的库
2. 灵活性比易用性跟重要
   - 灵活性-易封装，易用性-不必封装，直接使用
3. 关注数据库原理，而不是ORM工具的使用方式，如Redis、Etcd、MySQL等，关注数据库之间的差异，选择恰当的数据库或数据库组合

参考库：gorm（MySql）

#### （4）小结
两边薄（API & DAO），而中间厚（Service）

小技巧：
1. API与DAO随个人编程能力提升（设计，库的数据程度）
2. 性能优化时，优先考虑Dao，其次考虑API
3. 排查问题时，首先分析API出入口，其次则是Dao的出入口，Serive中的问题则是严重问题

再认知：
- API：服务对外的们门面，通过接口的定义，便可以大致知道其运作的原理
- Service：复杂的业务逻辑，需重点关注核心成员
- Dao：调用诸多的ORM或SDK，作为工具，是程序员能力的重点


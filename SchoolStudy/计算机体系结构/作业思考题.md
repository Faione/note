# 作业与习题

- [作业与习题](#作业与习题)
  - [Cache一致性](#cache一致性)
    - [一](#一)
    - [二](#二)
  - [VLIW超长指令字](#vliw超长指令字)
    - [一](#一-1)
    - [二](#二-1)

## Cache一致性

### 一

- 在基于目录的Cache一致性系统中，目录记载了P1处理器已经有数据块A的备份
  - （1）在哪些情况下，目录又会收到一个P1对A块访问的请求
  - （2）如何正确处理上述情况？

### 二

- A、B、C、D为进程P1，P2，P3的共享变量，且初始值均为0，该程序执行结果为D=2000，在基于目录的Cache一致性系统中，运行结果是D=0，请解释原因

|   P1   |       P2       |       P3       |
| :----: | :------------: | :------------: |
| A=2000 | while(B!=1){;} | while(C!=1){;} |
|  B=1   |      C=1       |      D=A       |

## VLIW超长指令字

### 一

- 超长指令字 （VLIW） 设计人员在寄存器使用的体系结构规则方面需要做出一些基本选择。假设 VLIW 设计了自耗尽的执行流水线：一旦启动了操作，其结果将在以后最多 L 个周期出现在目标寄存器中（其中 L 是操作的延迟）。寄存器是永远不够用的，因此希望从现有寄存器中得到最大使用率。请考虑下图。如果负载具有 1 + 2 个周期的延迟，请展开此循环一次，并显示在 没有任何流水线中断或停顿的情况下，每个周期能够进行两次加载和两次添加的 VLIW 如何使用最小数量的寄存器。在存在自耗尽流水线的时，说明一种可能会破坏流水线并产生错误的结果的情况。

![](./img/2022-06-15-13-09-17.png)

### 二

- 假设一个 VLIW 处理器的指令包含五个操作，如图所示。我们将比较两个循环展开的程度。首先，展开循环 6 次以获取并规划ILP，使其没有任何stall（即完全空的事件周期），折叠循环开销指令。并重复该方法但展开循环10 次。忽略分支延迟间隙。写出两个规划。每个规划的结果向量的每个元素的执行时间是多少？每个规划中使用的操作间隙的百分比是多少？两个规
划之间的代码大小有多大差异？这两个规划的总寄存器需求是多少？

![](./img/2022-06-15-13-10-39.png)
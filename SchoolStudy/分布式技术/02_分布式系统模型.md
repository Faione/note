# 分布式系统模型

- [分布式系统模型](#分布式系统模型)
  - [一、基本概念](#一基本概念)
    - [模型](#模型)
    - [分布式系统的困难和威胁](#分布式系统的困难和威胁)
    - [分布式系统的模型](#分布式系统的模型)
  - [二、物理模型](#二物理模型)
    - [从物理模型看分布式系统的代际对比](#从物理模型看分布式系统的代际对比)
    - [系统的分布式系统](#系统的分布式系统)
  - [三、体系结构模型](#三体系结构模型)
    - [体系结构元素](#体系结构元素)
      - [通信实体](#通信实体)
    - [通信范式](#通信范式)
      - [进程间通信](#进程间通信)

## 一、基本概念

### 模型

- 完备性表征
  - 一个系统需要在满足基础运行环境下，面对各类困难和出现的不确定因素（威胁等）能正常的工作
- 共性抽象和设计复用
  - 一种系统有不同的具体设计和实现，但需要满足一致的基本特征

- 模型是解决公共设计问题的一种好的手段
  - 模型的公共性
    - 满足模型的具体设计和实现，即是能保证达成公共基础特征
  - 模型的多样性和复合型
    - 面向一个领域或特定体系的模型通常由一组模型组成，每类模型对一个方面给出抽象的、简化的、但是一致的描述

### 分布式系统的困难和威胁

- 实用模式的多样性
- 系统环境的多样性
  - 容纳异构硬件、操作系统和网络
- 内部问题
  - 非同步时钟、冲突的数据更新、多种涉及系统单个组件的软硬件故障模式
- 外部问题和威胁
  - 对数据完整性、保密性的攻击以及服务拒绝攻击等

### 分布式系统的模型

- 分布式系统的模型
  - 物理模型
    - 从系统组成的角度描述计算机和设备的类型以及它们的互联
  - 体系结构模型
    - 从系统的计算元素构成和功能、通信任务方面来描述系统
  - 基础模型
    - 是对（各类）分布式系统共性问题的描述，通常由多个方面的模型构成
- 三个层次的模型相互协同

## 二、物理模型
  
- 分布式系统的 基线物理模型/最小物理模型
  - 定义
    - 一个其硬件或软件组件分布在联网的计算机上，组件之间通过传递消息进行通信和动作协调的系统
  - 最小物理模型
    - 一组可扩展的计算机节点，这些节点通过计算机网络相互连接进行所需的消息传递

### 从物理模型看分布式系统的代际对比
- 业内正在开展下一代分布式系统的研究

|              | 早期分布式系统                                   | 互联网下的分布式系统                                   | 当代分布式系统                                                         |
| ------------ | ------------------------------------------------ | ------------------------------------------------------ | ---------------------------------------------------------------------- |
| 时间         | 197x-199x                                        | 1990-201x                                              | 201x-                                                                  |
| 规模和异构性 | 小、相对同构的配置                               | 大、互联网为核心网络，从平台、语言和中间件方面都比较大 | 超大、引入移动互联网和设备，异构维度增加，包括体系结构中完全不同的风格 |
| 开放性       | 不够重视，多局限于局部网络，不属于优先考虑的内容 | 重要，有一系列的标准                                   | 已经成为重要的挑战，标准往往不能覆盖复杂的系统                         |
| 服务质量     | 有基本的质量考虑                                 | 重要，针对质量引入服务                                 | 已经成为重要的挑战，已有的服务不能支撑复杂的的系统                     |

### 系统的分布式系统

- 系统的系统概念
  - 一个复杂的系统，它由一系列子系统组成，这些子系统本身也是系统，它们一起完成一个或多个特定的任务
  - 类比，互联网是网络的网络
- 系统的分布式系统
  - 一个复杂的，由分布式系统作为子系统构成的超大规模系统
  - 可以看成是物理模型中基线模型的延申、嵌套、堆叠
  - 是一个复杂巨系统

## 三、体系结构模型

- 体系结构的构成
  - 用值得的 2~N 多个独立组件、以及这些组件之间的关系来表示的结构
- 体系结构的整体目标是确保结构能满足现在和将来可能的需求
  - 除功能外，还需要关心系统的可靠性、可管理性、适应性、及性价比

- 体系结构模型
  - 计算元素
    - 单个计算机或者通过网络互联的计算机集合
  - 从系统的计算元素构成和(角色)功能、通信任务等方面来描述系统
  - 客户-服务器模型 和 对等模型 是分布式系统中的两种最常使用的体系结构模型  

### 体系结构元素

- 从四个关键问题入手理清一个分布式系统的基础和构建模块的方法
  1. 分布式系统中进行**通信**的**实体**是什么
  2. 实体之间如何通信，使用何种**通信范式**
  3. 实体在整个体系结构中扮演什么**角色**(功能), 承担什么**责任**
  4. 实体如何被映射到分布式系统的物理基础设施上(放置)

<table>
<tbody>
<tr>
<th>通信实体</th>
<th>通信范式</th>
<th>角色责任</th>
<th>放置</th>
</tr>
<tr>
<td colspan=4 align=center>分布式系统体系结构模型</td>
</tr>
</tbody>
</table>

#### 通信实体

- 分布式系统中的"部件/实例"，具有通信能力，能够实现相互通信

**进程**

- 传统分布式系统的通信实体通常是进程
  - 一个最传统的分布式系统可以看成是带有恰当的进程间通信范型的多个进程
- 通信实体也不完全是进程
  - 如运行不支持进程抽象的操作系统的设备，通信实体就是其本身
  - 大多数分布式系统中都使用线程来进行补充，通信的末端是线程

- 看待通信实体的两个角度
  - 在**面向系统**层面，进程作为通信实体，描述"链接关系"是清晰的，但在**面向问题**层面(目的)是不够清晰的
  - **面向问题**的抽象而设计的通信实体更具有分布式计算的特征

**对象**

- 面向对象的方法主要包括面向对象的设计和面向对象的编程语言
- 在分布式面向对象的方法中，一个计算由若干交互的对象组成，这些对象代表给定问题领域分解的自然单元
- 对象通过接口被访问，用一个相关的接口定义语言(IDL)定义一个对象上的方法规约

**组件**

- 类似于对象，为构造分布式系统提供面向问题的抽象，也是通过接口被访问
- 对象与组件的差异
  - 组件不仅指定其提供的接口，还同时给出关于其它组件或接口的假设/设定
    - 对象只考虑面向的问题，而不考虑其他对象，交由开发者在使用时设计，而组件则显示地声明依赖
  - 组件让所有的依赖显式化，为系统的构造提供一个更为完整的合约
- 组件的好处
  - 合约化的方法能极大的鼓励第三方开发组件
  - 组件可以通过去除隐含的依赖，提升一个更存粹的组合化的方法来构建分布式系统
  - 基于组件的中间件通常对关键领域，如部署、服务器编程等提供额外的支持

**web服务**
>W3c 对web服务的定义：一个软件应用，通过URL被辨识，他的接口
>和绑定可以通过XML定义、描述和发现。一个web服务通过在基于互
>联网上的协议，利用基于XML的消息交换支持于其它软件代理的直接
>交互

- web服务代表开发分布式系统的第三种重要的范型
  - web服务和对象、组件紧密相关，也是采用基于行为封装和通过接口访问的方法
- web服务的好处
  - web服务通过利用web标准标识和发现服务，web服务本质上是面向万维网的
  - 相对于对象和组件经常在一个组织内部使用，用于开发紧耦合的应用，web服务可以松耦合地组织起来可以跨越组织边界，实现业务到业务的集成

<table>
<tbody>
<tr>
<th colspan=2>通信实体</th>
</tr>
<tr>
<th>面向系统的实体</th>
<th>面向问题的实体</th>
</tr>
<tr>
<td>结点(TCP/IP)</td>
<td>对象</td>
</tr>
<tr>
<td>进程</td>
<td>组件</td>
</tr>
<tr>
<td></td>
<td>Web服务</td>
</tr>
</tbody>
</table>

### 通信范式

- 分布式系统体系结构中的通信范式定义了通信实体的通信方式
- 通信范式种类: 进程间通信、远程调用、间接通信


#### 进程间通信
